function jetpackcrm_draw_contact_chart(t){window.contactChart.data.labels=t.labels,window.contactChart.data.datasets[0].data=t.data,window.contactChart.update()}jQuery(document).ready(function(t){window.dash_security=jQuery("#zbs_dash_count_security").val();var a=document.getElementById("growth-chart");window.contactChart=new Chart(a,{type:"bar",data:{labels:"",datasets:[{label:"",backgroundColor:"#00a0d2",data:""}]},options:{responsive:!0,maintainAspectRatio:!1,legend:{display:!1},title:{display:!1,text:""},scales:{yAxes:[{display:!0,ticks:{beginAtZero:!0}}]}}}),funnel_height=jQuery("#bar-chart").height(),jQuery(".zbs-funnel").height(funnel_height),jQuery(window).resize(function(){jQuery("#funnel-container").html(""),funnel_height=jQuery("#bar-chart").height(),jQuery(".zbs-funnel").height(funnel_height),jQuery("#funnel-container").drawFunnel(window.funnelData,{width:jQuery(".zbs-funnel").width()-50,height:jQuery(".zbs-funnel").height()-50,padding:1,half:!1,minSegmentSize:30,label:function(t){return t}})}),jQuery(".dashboard-customiser").on("click",function(t){jQuery(".dashboard-custom-choices").toggle()}),jQuery(".contact-display-chooser .day-or-month .button").on("click",function(t){jQuery(".contact-display-chooser .day-or-month .button").removeClass("selected"),jQuery(this).addClass("selected"),range=jQuery(this).attr("data-range"),"yearly"==range&&jetpackcrm_draw_contact_chart(window.yearly),"monthly"==range&&jetpackcrm_draw_contact_chart(window.monthly),"weekly"==range&&jetpackcrm_draw_contact_chart(window.weekly),"daily"==range&&jetpackcrm_draw_contact_chart(window.daily)}),jQuery(".dashboard-custom-choices input").on("click",function(t){var a=jQuery(this).attr("id");jQuery("#"+a+"_display").toggle();var e=-1;jQuery("#"+a).is(":checked")&&(e=1);var n=a,a=jQuery("#zbs_dash_setting_security").val();jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"zbs_dash_setting",is_checked:e,the_setting:n,security:a},dataType:"json",timeout:2e4,success:function(t){},error:function(t){}})}),jQuery(function(){function t(t,a){zbsStrokeColor=zbsJS_admcolours.colors[0],jQuery("#reportrange span").html(t.format("MMM,D,Y")+" - "+a.format("MMM,D,Y")),s=t.format("Y-MM-DD"),e=a.format("Y-MM-DD"),zbs_days=Math.round((a-t)/60/60/24/1e3),jQuery(".time-ago").html(zbs_days+" days ago");var n=moment(s).clone().subtract(zbs_days,"days");ps=n.format("Y-MM-DD"),zbs_days_p=Math.round((t-n)/60/60/24/1e3);a=s,t=e,n=ps;jQuery(".loading").css("color",zbsStrokeColor).show();n={action:"jetpackcrm_dash_refresh",s:a,e:t,ps:n,d:zbs_days,security:window.dash_security};o=jQuery.ajax({url:ajaxurl,type:"POST",data:n,dataType:"json"}),o.done(function(t){window.yearly=t.chart.yearly,window.monthly=t.chart.monthly,window.weekly=t.chart.weekly,window.daily=t.chart.daily,summary_data='<div class="'+t.boxes+'column row">',jQuery.each(t.summary,function(t,a){summary_data+='<div class="column">',summary_data+='<div class="panel text-center">',summary_data+='<div class="panel-heading">',summary_data+='<h4 class="panel-title text-muted font-light">'+a.label+"</h4>",summary_data+="</div>",summary_data+='<div class="panel-body p-t-10">',summary_data+='<h2 class="zbs-h2"><i class="mdi mdi-arrow-down-bold-circle-outline text-danger m-r-10"></i><b>'+a.total+"</b></h2>",summary_data+="</div>",summary_data+="</div>",summary_data+="</div>"}),summary_data+="</div>",jQuery("#crm_summary_numbers").html(summary_data),jetpackcrm_draw_contact_chart(t.chart.monthly)}),o.fail(function(t){})}t(moment().subtract(1,"year"),moment()),jQuery("#reportrange").daterangepicker({ranges:{"Last 30 Days":[moment().subtract(30,"days"),moment()],"Latest Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")],"Prior Month":[moment().subtract(2,"month").startOf("month"),moment().subtract(2,"month").endOf("month")],"Last 3 Months":[moment().subtract(3,"month").startOf("month"),moment().subtract(1,"month").endOf("month")],"Last 6 Months":[moment().subtract(6,"month").startOf("month"),moment().subtract(1,"month").endOf("month")],"Last Year":[moment().subtract(1,"year").startOf("month"),moment().subtract(1,"month").endOf("month")]},maxDate:moment()},t)}),jQuery("#daterange").on("apply.daterangepicker",function(t,a){jQuery("#zbs_from").val(a.startDate.format("YYYY-MM-DD HH:mm:ss")),jQuery("#zbs_to").val(a.endDate.format("YYYY-MM-DD HH:mm:ss"))})});