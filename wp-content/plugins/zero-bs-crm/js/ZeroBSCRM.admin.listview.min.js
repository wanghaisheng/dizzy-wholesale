var zbscrmjs_sidebarState=1,zbscrmjs_sidebarChangeBlocker=!1;function zeroBSCRMJS_initListView(){jQuery("#zbs-screenoptions-records-per-page").off("change").change(function(){zeroBSCRMJS_saveScreenOptions(function(){window.zbsListViewParams.retrieved=!1,zeroBSCRMJS_drawListView()})}),jQuery("#zbs-columnmanager-bottomsave").off("click").click(function(){jQuery("#zbs-open-column-manager").click()}),jQuery("#zbs-open-column-manager").off("click").click(function(){jQuery("#zbs-list-col-editor").is(":visible")?(jQuery(this).addClass("blue").removeClass("teal"),jQuery("#zbs-list-col-editor").hide()):(jQuery(this).removeClass("blue").addClass("teal"),jQuery("#zbs-list-col-editor").show())}),jQuery("#zbs-toggle-sidebar").click(function(){window.zbscrmjs_sidebarChangeBlocker||(window.zbscrmjs_sidebarChangeBlocker=!0,1==window.zbscrmjs_sidebarState?(jQuery("#zbs-list-sidebar-wrap").hide(),jQuery("#zbs-list-table-wrap").removeClass().addClass("sixteen wide column"),jQuery(this).html('<i class="toggle on icon"></i>'),window.zbscrmjs_sidebarState=-1):(jQuery("#zbs-list-sidebar-wrap").show(),jQuery("#zbs-list-table-wrap").removeClass().addClass("twelve wide column"),jQuery(this).html('<i class="toggle off icon"></i>'),window.zbscrmjs_sidebarState=1),setTimeout(function(){window.zbscrmjs_sidebarChangeBlocker=!1},0))}),void 0!==window.zbsListViewSettings&&void 0!==window.zbsListViewSettings.filters&&window.zbsListViewSettings.filters&&(jQuery("#zbs-list-view-edit-filters").click(function(){jQuery("#zbs-list-view-edit-filters-wrap, #zbs-list-filters, #zbs-list-filters-edit-title").toggle(),setTimeout(function(){jQuery("#zbs-list-view-edit-filters").hasClass("active")?jQuery("#zbs-list-view-edit-filters").removeClass("active"):jQuery("#zbs-list-view-edit-filters").addClass("active")},0)}),zeroBSCRMJS_drawFilterButtons()),jQuery("#zbs-column-manager-available-cols .zbs-column-manager-connected, #zbs-column-manager-current-cols").sortable({connectWith:".zbs-column-manager-connected",items:".zbs-column-manager-col",placeholder:"ui compact tiny button zbs-column-manager-droptarget",stop:function(e,t){zeroBSCRMJS_updateListViewColumnsVar(function(e){jQuery("#zbs-col-manager-loading").show(),jQuery("#zbsCantSaveCols").hide(),zeroBSCRMJS_updateListViewColumns(function(e){jQuery("#zbs-col-manager-loading").hide(),window.zbsListViewParams.retrieved=!1,zeroBSCRMJS_drawListView()},function(e){jQuery("#zbs-col-manager-loading").hide(),jQuery("#zbsCantSaveCols").show()})},function(e){})}}).disableSelection(),zeroBSCRMJS_drawListView(),zeroBSCRMJS_bindSideBar(),window.zbsListViewSettings.filters&&jQuery("#zbs-list-view-filter-options-current, #zbs-list-view-filter-options-available").sortable({connectWith:".zbs-filter-manager-connected",stop:function(e,t){zeroBSCRMJS_updateFilterButtonsVar(function(e){jQuery("#zbs-filter-button-manager-loading").show(),jQuery("#zbsCantSaveCols").hide(),zeroBSCRMJS_updateListViewFilterButtons(function(e){jQuery("#zbs-filter-button-manager-loading").hide(),zeroBSCRMJS_drawFilterButtons()},function(e){jQuery("#zbs-filter-button-manager-loading").hide(),jQuery("#zbsCantSaveButtons").show()})},function(e){})}}).disableSelection()}function zeroBSCRMJS_bindSideBar(){jQuery("#zbs-listview-runsearch").off("click").click(function(){zeroBSCRMJS_fireSearch()}),jQuery("#zbs-listview-search").keypress(function(e){if(13==e.which)return zeroBSCRMJS_fireSearch(),!1})}function zeroBSCRMJS_fireSearch(){var e=jQuery("#zbs-listview-search").val();""!=e&&zeroBSCRMJS_updateFilterOptionSearch(e)}function zeroBSCRMJS_listview_generateCurrentFilterURL(e,t){var i=window.zbsListViewLink,s="",n="",o="";return window.zbsListViewSettings.tags&&(s="",void 0!==window.zbsListViewParams.filters.tags&&0<window.zbsListViewParams.filters.tags.length&&jQuery.each(window.zbsListViewParams.filters.tags,function(e,t){""!=s&&(s+=","),void 0!==t.term_id?s+=t.term_id:void 0!==t.id&&(s+=t.id)})),window.zbsListViewSettings.filters&&(n="",void 0!==window.zbsListViewParams.filters.quickfilters&&0<window.zbsListViewParams.filters.quickfilters.length&&jQuery.each(window.zbsListViewParams.filters.quickfilters,function(e,t){""!=n&&(n+=","),n+=t})),window.zbsListViewSettings.search&&(o="",void 0!==window.zbsListViewParams.filters.s&&""!=window.zbsListViewParams.filters.s&&(o=window.zbsListViewParams.filters.s)),""!=s&&"undefined"!=s&&(i+=window.zbsListViewTagFilterAffix+s),""!=o&&"undefined"!=o&&(i+=window.zbsListViewSearchFilterAffix+encodeURIComponent(o)),void 0!==t&&t||""!=n&&(i+=window.zbsListViewQuickFilterAffix+n),void 0!==e&&e||void 0!==window.zbsListViewParams.sort&&(i+="&sort="+window.zbsListViewParams.sort,void 0!==window.zbsListViewParams.sortorder&&"asc"==window.zbsListViewParams.sortorder&&(i+="&sortdirection=asc")),i}function zeroBSCRMJS_updateFilterOptionSearch(e){var t,i=-1;void 0!==window.zbsListViewParams.filters.s&&(i=window.zbsListViewParams.filters.s),window.zbsListViewParams.filters.s=e,zeroBSCRMJS_isArray(window.zbsListViewParams.filters)&&(t={s:e},void 0!==window.zbsListViewParams.filters.tags&&(t.tags=window.zbsListViewParams.filters.tags),window.zbsListViewParams.filters=t),-1!=i&&i==e||(window.zbsListViewParams.retrieved=!1,zeroBSCRMJS_drawListView())}function zeroBSCRMJS_writeFilterSentence(){var i,s,e="";void 0!==window.zbsListViewParams.filters.s&&""!=window.zbsListViewParams.filters.s&&(e+=zeroBSCRMJS_listViewLang("containing","Containing")+' "<span>'+window.zbsListViewParams.filters.s+'</span>"'),void 0!==window.zbsListViewParams.filters.tags&&0<window.zbsListViewParams.filters.tags.length&&(""!=e&&(e+=" and "),e+="Tagged ",i="",jQuery.each(window.zbsListViewParams.filters.tags,function(e,t){""!=i&&(i+=", "),i+='"<span>'+t.name+'</span>"'}),e+=i),void 0!==window.zbsListViewParams.filters.quickfilters&&0<window.zbsListViewParams.filters.quickfilters.length&&(""!=e&&(e+=" and "),e+=zeroBSCRMJS_listViewLang("filteredby","Filtered by")+": ",s="",jQuery.each(window.zbsListViewParams.filters.quickfilters,function(e,t){var i;""!=s&&(s+=","),"notcontactedin"==t.substr(0,14)?(i=t.substr(14),s+=zeroBSCRMJS_listViewLang("notcontactedin","Not Contacted in")+" "+i+" "+zeroBSCRMJS_listViewLang("days","days")):(t=t.replace(/_/g," "),s+=zeroBSCRMJS_ucwords(t))}),e+=s),""!=e&&(e='<h5 class="ui header blue"><i class="filter icon"></i>'+e+"</h5>"),jQuery("#zbs-listview-biline").html(e),""!=e?(jQuery("#zbs-listview-biline").show(),jQuery("#zbs-listview-clearfilters, #zbs-listview-biline").removeClass("zbs-hide").removeClass("hidden")):(jQuery("#zbs-listview-biline").hide(),jQuery("#zbs-listview-clearfilters, #zbs-listview-biline").addClass("zbs-hide").addClass("hidden"))}function zeroBSCRMJS_updateListViewColumnsVar(e,t){var i,s;window.zbsDrawListViewColUpdateBlocker||(window.zbsDrawListViewColUpdateBlocker=!0,i=[],jQuery("#zbs-column-manager-current-cols .zbs-column-manager-col").each(function(e,t){i.push({fieldstr:jQuery(t).attr("data-key"),namestr:jQuery(t).html()})}),s=!1,JSON.stringify(window.zbsListViewParams.columns)!==JSON.stringify(i)&&(s=!0),s?(window.zbsListViewParams.columns=i,"function"==typeof e&&e(i)):"function"==typeof t&&t(i),window.zbsDrawListViewColUpdateBlocker=!1)}function zeroBSCRMJS_updateListViewColumns(t,i){var e;window.zbsDrawListViewColUpdateAJAXBlocker||(window.zbsDrawListViewColUpdateAJAXBlocker=!0,e={action:"updateListViewColumns",sec:window.zbscrmjs_secToken,listtype:window.zbsListViewParams.listtype,v:window.zbsListViewParams.columns},jQuery.ajax({type:"POST",url:ajaxurl,data:e,dataType:"json",timeout:2e4,success:function(e){window.zbsListViewParams.columns=e,"function"==typeof t&&t(e),window.zbsDrawListViewColUpdateAJAXBlocker=!1},error:function(e){console.error("Column Data update Error: ",e),"function"==typeof i&&i(e),window.zbsDrawListViewColUpdateAJAXBlocker=!1}}))}function zeroBSCRMJS_retrieveListViewData(t,i){var e;window.zbsDrawListViewAJAXBlocker||(window.zbsDrawListViewAJAXBlocker=!0,e={action:"retrieveListViewData",sec:window.zbscrmjs_secToken,v:window.zbsListViewParams},jQuery.ajax({type:"POST",url:ajaxurl,data:e,dataType:"json",timeout:2e4,success:function(e){null!=e&&void 0!==e.objects?(window.zbsListViewData=e.objects,void 0!==e.objectcount?window.zbsListViewCount=e.objectcount:window.zbsListViewCount=0):(console.error("Failed to retrieve object data!",e),"function"==typeof i&&i(e)),"function"==typeof t&&t(e),window.zbsDrawListViewAJAXBlocker=!1},error:function(e){console.error("List View Data Retrieve Error: ",e),"function"==typeof i&&i(e),window.zbsDrawListViewAJAXBlocker=!1}}))}function zeroBSCRMJS_listViewLang(e,t){return void 0===t&&(t=""),void 0!==window.zbsListViewLangLabels[e]?window.zbsListViewLangLabels[e]:t}function zeroBSCRMJS_listViewIco(e,t){return void 0===t&&(t=""),void 0!==window.zbsListViewIcos[e]?window.zbsListViewIcos[e]:t}function zeroBSCRMJS_drawListView(){window.zbsDrawListViewBlocker||(jQuery("#zbsNoResults").addClass("hidden").appendTo("#zbs-list-warnings-wrap"),window.zbsDrawListViewBlocker=!0,jQuery("#zbs-list-table-wrap").html(window.zbsDrawListLoadingBoxHTML),window.zbsListViewParams.retrieved||zeroBSCRMJS_retrieveListViewData(function(e){var t={},i="";i+=zeroBSCRMJS_listViewHeader(),0<window.zbsListViewData.length?jQuery.each(window.zbsListViewData,function(e,t){i+=zeroBSCRMJS_listViewLine(t)}):jQuery("#zbsNoResults").length&&(i+='<tr><td colspan="'+window.zbsListViewParams.columns.length+'" id="zbs-no-results-wrap">',t.nores=!0,i+="</td></tr>"),i+=zeroBSCRMJS_listViewFooter(),jQuery("#zbs-list-table-wrap").html(i),setTimeout(function(){t.nores,jQuery("#zbsNoResults").appendTo("#zbs-no-results-wrap").removeClass("hidden"),zeroBSCRMJS_listViewBinds()},0),zeroBSCRMJS_writeFilterSentence(),window.zbsDrawListViewBlocker=!1},function(e){jQuery("#zbsCantLoadData").show(),jQuery("#zbs-list-table-wrap, #zbs-list-sidebar-wrap").hide(),window.zbsDrawListViewBlocker=!1}))}function zeroBSCRMJS_listViewHeader(){var o="";return 0<window.zbsListViewParams.columns.length&&(o='<table class="ui celled table unstackable">',o+="      <thead>",o+="        <tr>",void 0!==window.zbsBulkActions&&0<window.zbsBulkActions.length&&(o+='<th class="zbs-listview-bulk-hd"><div class="ui fitted checkbox"><input type="checkbox" id="zbsbulkmaster" /><label for="zbsbulkmaster"></label></div></th>'),jQuery.each(window.zbsListViewParams.columns,function(e,t){var i,s,n=t.namestr;void 0!==window.zbsSortables&&-1<window.zbsSortables.indexOf(t.fieldstr)&&(void 0!==window.zbsListViewParams.sort&&window.zbsListViewParams.sort==t.fieldstr?(i="down",s="asc",void 0!==window.zbsListViewParams.sortorder&&"asc"==window.zbsListViewParams.sortorder&&(i="up",s="desc"),n+=' <a href="'+zeroBSCRMJS_listview_generateCurrentFilterURL(!0)+"&sort="+t.fieldstr+"&sortdirection="+s+'" title="Click to Sort"><i class="angle '+i+' icon"></i></a>'):n=' <a href="'+zeroBSCRMJS_listview_generateCurrentFilterURL(!0)+"&sort="+t.fieldstr+'" title="Click to Sort">'+n+"</a>"),o+="        <th>"+n+"</th>"}),o+="      </tr></thead>",o+="      <tbody>"),o}function zeroBSCRMJS_listViewLine(s){var e,n="";return 0<window.zbsListViewParams.columns.length&&(e="",void 0!==s.id&&(e+=' data-id="'+s.id+'"'),n="<tr"+e+">",void 0!==window.zbsBulkActions&&0<window.zbsBulkActions.length&&(n+='<td class="zbs-listview-bulk"><div class="ui fitted checkbox"><input type="checkbox" id="zbsbulk'+s.id+'" data-entityid="'+s.id+'" data-entityname="'+s.name+'" class="zbsbulkcb" /><label for="zbsbulk'+s.id+'"></label></div></td>'),jQuery.each(window.zbsListViewParams.columns,function(e,t){var i="zeroBSCRMJS_listView_"+window.zbsListViewSettings.objdbname+"_"+t.fieldstr;"function"==typeof window[i]?n+=window[i](s):(i="zeroBSCRMJS_listView_generic_"+t.fieldstr,"function"==typeof window[i]?n+=window[i](s):void 0!==s[t.fieldstr+"_cfdate"]&&null!=s[t.fieldstr+"_cfdate"]&&"null"!=s[t.fieldstr+"_cfdate"]?n+="<td>"+jpcrm_abbreviate_str(s[t.fieldstr+"_cfdate"],80,"...","return")+"</td>":void 0!==s[t.fieldstr]&&null!=s[t.fieldstr]&&"null"!=s[t.fieldstr]?n+="<td>"+jpcrm_abbreviate_str(s[t.fieldstr],80,"...","return")+"</td>":n+="<td></td>")}),n+="</tr>"),n}function zeroBSCRMJS_listViewFooter(){var i="";if(void 0!==window.zbsListViewParams.pagination&&void 0!==window.zbsListViewCount){i+='<tfoot><tr><th colspan="'+(window.zbsListViewParams.columns.length+1)+'">';var e=1;void 0!==window.zbsListViewParams.paged&&(e=window.zbsListViewParams.paged);var t=window.zbsListViewParams.count,s=1,n=zeroBSCRMJS_listview_generateCurrentFilterURL(),o="",a="";if(0<window.zbsListViewCount&&0<t&&(s=Math.ceil(window.zbsListViewCount/t)),1<s){var r=[];if(1<s&&1<e&&(o=n+"&paged="+(e-1)),1<s&&e+1<=s&&(a=n+"&paged="+(e+1)),s<9)for(p=1;p<=s;p++){var l="";p==e&&(l=" active");var d={page:p,url:n+"&paged="+p,classStr:"item"+l};r.push(d)}else{for(p=1;p<=3;p++){l="";p==e&&(l=" active");var d={page:p,url:n+"&paged="+p,classStr:"item"+l};r.push(d)}3<e&&e<s-2&&(d={page:!1,url:"#",classStr:"item"},r.push(d),d={page:e,url:n+"&paged="+e,classStr:"item active"},r.push(d));d={page:!1,url:"#",classStr:"item"};for(r.push(d),p=s-2;p<=s;p++){l="";p==e&&(l=" active");d={page:p,url:n+"&paged="+p,classStr:"item"+l};r.push(d)}}0<r.length&&(i+='<div class="ui right floated pagination menu">',i+=""!=o?'<a class="icon item" href="'+o+'">':'<a class="icon item disabled">',i+='<i class="left chevron icon"></i>',i+="</a>",jQuery.each(r,function(e,t){!1!==t.page?i+='<a class="'+t.classStr+'" href="'+t.url+'">'+t.page+"</a>":i+='<a class="item disabled">...</a>'}),i+=""!=a?'<a class="icon item" href="'+a+'">':'<a class="icon item disabled">',i+='<i class="right chevron icon"></i>',i+="</a>",i+="</div>")}a=window.zbsListViewObjName;(1<window.zbsListViewCount||0==window.zbsListViewCount)&&(a=window.zbsListViewObjNamePlural),i+='<div id="zbs-listview-footer-count">'+zbscrmjs_prettifyLongInts(window.zbsListViewCount)+" "+a+"</div>",i+='<div id="zbsbulkactions" style="display:none"></div>',i+="</th>",i+="</tr></tfoot>"}return i+="</tbody></table>"}function zeroBSCRMJS_listViewBinds(){jQuery("#zbsbulkmaster").change(function(){jQuery(".zbs-listview-bulk input:checkbox").prop("checked",jQuery(this).prop("checked")),setTimeout(function(){zeroBSCRMJS_listView_bulkActionsUpdate()},0)}),jQuery(".zbs-listview-bulk input:checkbox").click(function(){setTimeout(function(){zeroBSCRMJS_listView_bulkActionsUpdate()},0)}),void 0!==window.zbsListViewSettings.editinline&&window.zbsListViewSettings.editinline&&zeroBSCRMJS_bindInlineEditing();var e="";void 0!==window.zbsListViewParams&&void 0!==window.zbsListViewParams.listtype&&(e="zeroBSCRMJS_listView_postRender_"+window.zbsListViewParams.listtype),""!=e&&"function"==typeof window[e]&&window[e]()}function zeroBSCRMJS_listView_bulkActionsUpdate(){var n,o,e;void 0!==window.zbsBulkActions&&0<window.zbsBulkActions.length&&(n="",o=zeroBSCRMJS_listView_bulkActionsGetChecked(),e=jQuery("#zbsbulkactions"),document.getElementById("zbsbulkactionmaster")?(jQuery("#selectedCount").html(o.length),innerHTML="",jQuery.each(window.zbsBulkActions,function(e,t){var i,s=!0;"merge"==t&&2!=o.length&&(s=!1),s&&(i="zeroBSCRMJS_listView_generic_bulkActionTitle_"+t,(s="")!==(s=("function"==typeof window[i]||(i="zeroBSCRMJS_listView_"+window.zbsListViewSettings.objdbname+"_bulkActionTitle_"+t),window[i]()))&&(innerHTML+='<option value="'+t+'">'+s+"</option>"))}),jQuery("#zbsbulkactionmaster").html(innerHTML)):(n+='(<span id="selectedCount">'+o.length+"</span> selected) ",void 0!==window.zbsBulkActions&&0<window.zbsBulkActions.length&&(n+='<select id="zbsbulkactionmaster">',jQuery.each(window.zbsBulkActions,function(e,t){var i,s=!0;"merge"==t&&2!=o.length&&(s=!1),s&&(i="zeroBSCRMJS_listView_generic_bulkActionTitle_"+t,(s="")!==(s=("function"==typeof window[i]||(i="zeroBSCRMJS_listView_"+window.zbsListViewSettings.objdbname+"_bulkActionTitle_"+t),window[i]()))&&(n+='<option value="'+t+'">'+s+"</option>"))}),n+="</select>"),n+='<button id="zbsbulkactionmastergo" class="ui tiny button primary" style="margin-left:0.4em">Go</button>',e.html(n)),e.toggle(0<o.length),setTimeout(function(){jQuery("#zbsbulkactionmastergo").off("click").click(function(){var e="zeroBSCRMJS_listView_generic_bulkActionFire_"+jQuery("#zbsbulkactionmaster").val();"function"==typeof window[e]?window[e]():(e="zeroBSCRMJS_listView_"+window.zbsListViewSettings.objdbname+"_bulkActionFire_"+jQuery("#zbsbulkactionmaster").val(),window[e]())})},0))}function zeroBSCRMJS_enactBulkAction(e,t,i,s,n){window.zbsDrawListViewAJAXBlocker||(window.zbsDrawListViewAJAXBlocker=!0,void 0===i&&(i={}),t={action:"enactListViewBulkAction",sec:window.zbscrmjs_secToken,objtype:window.zbsListViewSettings.objdbname,actionstr:e,ids:t},t=zeroBSCRMJS_extend(t,i),jQuery.ajax({type:"POST",url:ajaxurl,data:t,dataType:"json",timeout:2e4,success:function(e){"function"==typeof s&&s(e),window.zbsDrawListViewAJAXBlocker=!1,window.zbsListViewParams.retrieved=!1,zeroBSCRMJS_drawListView()},error:function(e){"function"==typeof n&&n(e),window.zbsDrawListViewAJAXBlocker=!1}}))}function zeroBSCRMJS_listView_bulkActionsGetChecked(){var i=[];return jQuery(".zbs-listview-bulk input:checkbox").each(function(e,t){jQuery(t).is(":checked")&&i.push(jQuery(t).attr("data-entityid"))}),i}function zeroBSCRMJS_listView_bulkActionsGetCheckedIncNames(){var i=[];return jQuery(".zbs-listview-bulk input:checkbox").each(function(e,t){jQuery(t).is(":checked")&&i.push({id:jQuery(t).attr("data-entityid"),name:jQuery(t).attr("data-entityname")})}),i}function zeroBSCRMJS_listView_editURL(e){if(2<zbscrm_JS_DAL()){if(void 0!==e&&0<e)switch(window.zbsListViewParams.listtype){case"customer":return window.zbsObjectEditLinkPrefixCustomer+e;case"company":return window.zbsObjectEditLinkPrefixCompany+e;case"quote":return window.zbsObjectEditLinkPrefixQuote+e;case"invoice":return window.zbsObjectEditLinkPrefixInvoice+e;case"transaction":return window.zbsObjectEditLinkPrefixTransaction+e;case"segment":return window.zbsObjectEditLinkPrefixSegment+e;case"form":return window.zbsObjectEditLinkPrefixForm+e;case"quotetemplate":return window.zbsObjectEditLinkPrefixQuoteTemplate+e;default:return window.zbsObjectEditLinkPrefix+e}}else if(void 0!==e&&0<e)switch(window.zbsListViewParams.listtype){case"customer":return window.zbsObjectEditLinkPrefixCustomer+e;case"segment":return window.zbsObjectEditLinkPrefixCustomer+e+"&zbstype=segment";default:return window.zbsObjectEditLinkPrefix+e}return"#notfound"}function zeroBSCRMJS_listView_viewURL(e){if(2<zbscrm_JS_DAL()){if(void 0!==e&&0<e)switch(window.zbsListViewParams.listtype){case"customer":return window.zbsObjectViewLinkPrefixCustomer+e;case"company":return window.zbsObjectViewLinkPrefixCompany+e;case"quote":return window.zbsObjectViewLinkPrefixQuote+e;case"invoice":return window.zbsObjectViewLinkPrefixInvoice+e;case"transaction":return window.zbsObjectViewLinkPrefixTransaction+e;case"segment":return window.zbsObjectViewLinkPrefixSegment+e;case"form":return window.zbsObjectViewLinkPrefixForm+e;default:return window.zbsObjectEditLinkPrefix+e}}else if(void 0!==e&&0<e)switch(window.zbsListViewParams.listtype){case"customer":return window.zbsObjectViewLinkPrefixCustomer+e;case"company":return window.zbsObjectViewLinkPrefixCompany+e;default:return window.zbsObjectEditLinkPrefix+e}return"#notfound"}function zeroBSCRMJS_listView_viewURL_customer(e){return void 0!==e&&0<e?window.zbsObjectViewLinkPrefixCustomer+e:"#notfound"}function zeroBSCRMJS_listView_viewURL_company(e){return void 0!==e&&0<e?window.zbsObjectViewLinkPrefixCompany+e:"#notfound"}function zeroBSCRMJS_listView_emailURL_contact(e){return void 0!==e&&0<e?window.zbsObjectEmailLinkPrefix+e:"#notfound"}void 0!==window.zbsListViewCount&&null!==window.zbsListViewCount||(window.zbsListViewCount=0),jQuery(document).ready(function(){void 0!==window.zbsListViewSettings&&zeroBSCRMJS_initListView()});var zbsDrawFilterButtonUpdateBlocker=!1,zbsDrawFilterButtonUpdateAJAXBlocker=!1;function zeroBSCRMJS_updateFilterButtonsVar(e,t){var i,s;window.zbsDrawFilterButtonUpdateBlocker||(window.zbsDrawFilterButtonUpdateBlocker=!0,i=[],jQuery("#zbs-list-view-filter-options-current .zbs-filter-button-manager-button").each(function(e,t){i.push({fieldstr:jQuery(t).attr("data-key"),namestr:jQuery(t).html()})}),s=!1,JSON.stringify(window.zbsFilterButtons)!==JSON.stringify(i)&&(s=!0),s?(window.zbsFilterButtons=i,"function"==typeof e&&e(i)):"function"==typeof t&&t(i),window.zbsDrawFilterButtonUpdateBlocker=!1)}function zeroBSCRMJS_updateListViewFilterButtons(t,i){var e;window.zbsDrawFilterButtonUpdateAJAXBlocker||(window.zbsDrawFilterButtonUpdateAJAXBlocker=!0,e={action:"updateListViewFilterButtons",sec:window.zbscrmjs_secToken,listtype:window.zbsListViewParams.listtype,v:window.zbsFilterButtons},jQuery.ajax({type:"POST",url:ajaxurl,data:e,dataType:"json",timeout:2e4,success:function(e){window.zbsFilterButtons=e,"function"==typeof t&&t(e),window.zbsDrawFilterButtonUpdateAJAXBlocker=!1},error:function(e){console.error("Column Data update Error: ",e),"function"==typeof i&&i(e),window.zbsDrawFilterButtonUpdateAJAXBlocker=!1}}))}function zeroBSCRMJS_drawFilterButtons(){var o="";jQuery.each(window.zbsFilterButtons,function(e,t){var i="olive",s=!1,n="&quickfilters="+t.fieldstr;void 0!==window.zbsListViewParams.filters.quickfilters&&-1<window.zbsListViewParams.filters.quickfilters.indexOf(t.fieldstr)&&(i="green",s=!0,n=""),o+='<a href="'+zeroBSCRMJS_listview_generateCurrentFilterURL(!0,s)+n+'" class="ui '+i+' button tiny">'+t.namestr+"</a>"}),jQuery("#zbs-list-filters").html(o)}function zeroBSCRMJS_listView_generic_bulkActionFire_addtag(){var i={tags:[]},s='<div id="zbs-select-tags" class="ui segment">';void 0!==window.zbsTagsForBulkActions&&0<window.zbsTagsForBulkActions.length?jQuery.each(window.zbsTagsForBulkActions,function(e,t){s+='<div class="zbs-select-tag ui label"><div class="ui checkbox"><input type="checkbox" data-tagid="'+t.id+'" id="zbs-tag-'+t.id+'" /><label for="zbs-tag-'+t.id+'">'+t.name+"</label></div></div>"}):s+='<div class="ui message"><p>'+zeroBSCRMJS_listViewLang("notags")+"</p></div>",s+="</div>",swal({title:zeroBSCRMJS_listViewLang("whichtags"),html:"<div>"+zeroBSCRMJS_listViewLang("whichtagsadd")+"<br />"+s+"</div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("addthesetags"),onOpen:function(){jQuery(".zbs-select-tag input:checkbox").off("click").click(function(){jQuery(".zbs-select-tag input:checkbox").each(function(e,t){jQuery(t).is(":checked")?jQuery(t).closest(".ui.label").addClass("blue"):jQuery(t).closest(".ui.label").removeClass("blue")})})}}).then(function(e){e.value&&(i.tags=[],jQuery(".zbs-select-tag input:checkbox").each(function(e,t){jQuery(t).is(":checked")&&i.tags.push(jQuery(t).attr("data-tagid"))}),0<i.tags.length?zeroBSCRMJS_enactBulkAction("addtag",zeroBSCRMJS_listView_bulkActionsGetChecked(),i,function(e){swal(zeroBSCRMJS_listViewLang("tagsadded"),zeroBSCRMJS_listViewLang("tagsaddeddesc"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("tagsnotadded"),zeroBSCRMJS_listViewLang("tagsnotaddeddesc"),"warning")}):swal(zeroBSCRMJS_listViewLang("tagsnotselected"),zeroBSCRMJS_listViewLang("tagsnotselecteddesc"),"warning"))})}function zeroBSCRMJS_listView_generic_bulkActionFire_removetag(){var i={tags:[]},s='<div id="zbs-select-tags" class="ui segment">';void 0!==window.zbsTagsForBulkActions&&0<window.zbsTagsForBulkActions.length?jQuery.each(window.zbsTagsForBulkActions,function(e,t){s+='<div class="zbs-select-tag ui label"><div class="ui checkbox"><input type="checkbox" data-tagid="'+t.id+'" id="zbs-tag-'+t.id+'" /><label for="zbs-tag-'+t.id+'">'+t.name+"</label></div></div>"}):s+='<div class="ui message"><p>'+zeroBSCRMJS_listViewLang("notags")+"</p></div>",s+="</div>",swal({title:zeroBSCRMJS_listViewLang("whichtags"),html:"<div>"+zeroBSCRMJS_listViewLang("whichtagsremove")+"<br />"+s+"</div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("removethesetags"),onOpen:function(){jQuery(".zbs-select-tag input:checkbox").off("click").click(function(){jQuery(".zbs-select-tag input:checkbox").each(function(e,t){jQuery(t).is(":checked")?jQuery(t).closest(".ui.label").addClass("blue"):jQuery(t).closest(".ui.label").removeClass("blue")})})}}).then(function(e){e.value&&(i.tags=[],jQuery(".zbs-select-tag input:checkbox").each(function(e,t){jQuery(t).is(":checked")&&i.tags.push(jQuery(t).attr("data-tagid"))}),0<i.tags.length?zeroBSCRMJS_enactBulkAction("removetag",zeroBSCRMJS_listView_bulkActionsGetChecked(),i,function(e){swal(zeroBSCRMJS_listViewLang("tagsremoved"),zeroBSCRMJS_listViewLang("tagsremoveddesc"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("tagsnotremoved"),zeroBSCRMJS_listViewLang("tagsnotremoveddesc"),"warning")}):swal(zeroBSCRMJS_listViewLang("tagsnotselected"),zeroBSCRMJS_listViewLang("tagsnotselecteddesc"),"warning"))})}function zeroBSCRMJS_listView_generic_bulkActionFire_export(e){var t={sec:window.zbscrmjs_secToken,objtype:window.zbsListViewSettings.objdbname,ids:zeroBSCRMJS_listView_bulkActionsGetChecked()},i="";void 0!==window.zbsListViewSettings.objdbname&&""!==window.zbsListViewSettings.objdbname&&(i="&zbstype="+window.zbsListViewSettings.objdbname),zeroBSCRMJS_genericPostData(window.zbsExportPostURL+i,"post",t)}function zeroBSCRMJS_listView_generic_bulkActionTitle_addtag(){return zeroBSCRMJS_listViewLang("addtags")}function zeroBSCRMJS_listView_generic_bulkActionTitle_removetag(){return zeroBSCRMJS_listViewLang("removetags")}function zeroBSCRMJS_listView_generic_bulkActionTitle_export(){return zeroBSCRMJS_listViewLang("export")}function zeroBSCRMJS_listView_customer_bulkActionTitle_delete(){return zeroBSCRMJS_listViewLang("deletecontacts")}function zeroBSCRMJS_listView_customer_bulkActionTitle_merge(){return zeroBSCRMJS_listViewLang("merge")}function zeroBSCRMJS_listView_customer_id(e){return'<td><a href="'+zeroBSCRMJS_listView_viewURL(e.id)+'">#'+e.id+"</a></td>"}function zeroBSCRMJS_listView_customer_bulkActionFire_delete(){var t={leaveorphans:!0};swal({title:zeroBSCRMJS_listViewLang("areyousure"),html:"<div>"+zeroBSCRMJS_listViewLang("areyousurethese")+"<br /><label>"+zeroBSCRMJS_listViewLang("andthese")+'</label></div><select id="zbsbulkactiondeleteleaveorphans"><option value="1" selected="selected">'+zeroBSCRMJS_listViewLang("noleave")+'</option><option value="0">'+zeroBSCRMJS_listViewLang("yesthose")+"</option></select></div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete!"}).then(function(e){e.value&&(t.leaveorphans=jQuery("#zbsbulkactiondeleteleaveorphans").val(),zeroBSCRMJS_enactBulkAction("delete",zeroBSCRMJS_listView_bulkActionsGetChecked(),t,function(e){swal(zeroBSCRMJS_listViewLang("deleted"),zeroBSCRMJS_listViewLang("contactsdeleted"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("notdeleted"),zeroBSCRMJS_listViewLang("notcontactsdeleted"),"warning")}))})}function zeroBSCRMJS_listView_customer_bulkActionFire_merge(){var t={dominant:-1},e=zeroBSCRMJS_listView_bulkActionsGetCheckedIncNames(),i='<select id="zbsbulkactionmergemaster">';jQuery.each(e,function(e,t){i+='<option value="'+t.id+'">'+t.name+"</option>"}),i+="</select>",swal({title:zeroBSCRMJS_listViewLang("areyousure"),html:"<div>"+zeroBSCRMJS_listViewLang("areyousurethesemerge")+"<br /><label>"+zeroBSCRMJS_listViewLang("whichdominant")+"</label></div>"+i+"</div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("yesmerge")}).then(function(e){e.value&&(t.dominant=jQuery("#zbsbulkactionmergemaster").val(),zeroBSCRMJS_enactBulkAction("merge",zeroBSCRMJS_listView_bulkActionsGetChecked(),t,function(e){swal(zeroBSCRMJS_listViewLang("merged"),zeroBSCRMJS_listViewLang("contactsmerged"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("notmerged"),zeroBSCRMJS_listViewLang("contactsnotmerged"),"warning")}))})}function zeroBSCRMJS_listView_generic_id(e){var t="#"+e.id;return void 0!==e.zbsid&&(t='<a href="'+zeroBSCRMJS_listView_viewURL(e.id)+'">'+t+"</a>"),"<td"+zeroBSCRMJS_listView_tdAttr("id",e,e.id)+">"+t+"</td>"}function zeroBSCRMJS_listView_generic_status(e){var t="";return void 0!==e.status&&(t=e.status),"<td"+zeroBSCRMJS_listView_tdAttr("status",e,e.status)+">"+t+"</td>"}function zeroBSCRMJS_listView_generic_added(e){var t="";return""==t&&void 0!==e.created_date&&(t=e.created_date),""==t&&void 0!==e.created&&(t=e.created),""==t&&void 0!==e.added&&(t=e.added),'<td data-zbs-created-uts="'+e.createduts+'">'+t+"</td>"}function zeroBSCRMJS_listView_generic_lastupdated(e){var t="";return""==t&&void 0!==e.lastupdated_date&&(t=e.lastupdated_date),""==t&&void 0!==e.lastupdated&&(t=e.lastupdated),""==t&&void 0!==e.added&&(t=e.added),'<td data-zbs-created-uts="'+e.createduts+'">'+t+"</td>"}function zeroBSCRMJS_listView_generic_name(e){var t="";return void 0!==e.name&&(t=e.name),""==t&&void 0!==e.title&&(t=e.title),'<td><a href="'+zeroBSCRMJS_listView_viewURL(e.id)+'">'+t+"</a></td>"}function zeroBSCRMJS_listView_generic_nameavatar(e){var t=zeroBSCRMJS_listView_viewURL(e.id),i=zeroBSCRMJS_listView_emailURL_contact(e.id),s="";void 0!==e.email&&""!=e.email&&(s='<a href="'+i+'">'+e.email+"</a>");var n="";void 0!==e.avatar&&""!=e.avatar&&(n='<img src="'+e.avatar+'" class="ui mini rounded image">');i="";void 0!==e.name&&""!=e.name&&(i=e.name),""==i&&void 0!==e.email&&""!=e.email&&(i=e.email);e='<td class="name-and-avatar-list"><h4 class="ui image header">';return e+=n,e+='<div class="content"><a href="'+t+'">'+i+'</a><div class="sub header">'+s+"</div>",e+="</div></h4></td>"}function zeroBSCRMJS_listView_generic_company(e){var t="<td></td>";return void 0!==e.company&&void 0!==e.company.id&&(t='<td><a href="'+zeroBSCRMJS_listView_viewURL_company(e.company.id)+'">'+e.company.name+"</a></td>"),t}function zeroBSCRMJS_listView_generic_customer(e){var t,i,s,n;return void 0!==e.customer&&null!=e.customer&&0!=e.customer&&void 0!==e.customer.id?(n=e.customer,i=zeroBSCRMJS_listView_viewURL_customer(e.customer.id),zeroBSCRMJS_listView_emailURL_contact(e.customer.id),t="",void 0!==n.avatar&&""!=n.avatar&&(t='<img src="'+n.avatar+'" class="ui mini rounded image">'),s="",void 0!==n.fullname&&""!=n.fullname&&(s=n.fullname),""==s&&void 0!==n.email&&""!=n.email&&(s=n.email),n='<td class="name-and-avatar-list"><h4 class="ui image header">',n+=t,n+='<div class="content"><a href="'+i+'">'+s+'</a><div class="sub header"></div>',n+="</div></h4></td>"):void 0!==e.company&&null!=e.company&&void 0!==e.company.id?(t=e.company,i=zeroBSCRMJS_listView_viewURL_company(e.company.id),s="",void 0!==t.fullname&&""!=t.fullname&&(s=t.fullname),n='<td class="name-and-avatar-list"><h4 class="ui header">',n+='<i class="building icon"></i>',n+='<div class="content"><a href="'+i+'">'+s+"</a></div></h4></td>"):n="<td>"+zeroBSCRMJS_listViewLang("nocustomer")+"</td>",n}function zeroBSCRMJS_listView_generic_customeremail(e){var t,i=void 0!==e.customer&&void 0!==e.customer.id?(t=e.customer,zeroBSCRMJS_listView_viewURL_customer(e.customer.id),e=zeroBSCRMJS_listView_emailURL_contact(e.customer.id),i="",void 0!==t.email&&""!=t.email&&(i='<a href="'+e+'">'+t.email+"</a>"),"<td>"+i+"</td>"):"<td>"+zeroBSCRMJS_listViewLang("nocustomer")+"</td>";return i}function zeroBSCRMJS_listView_generic_assigned(e){var t="";return void 0!==e.owner&&void 0!==e.owner.OBJ&&void 0!==e.owner.OBJ.data&&void 0!==e.owner.OBJ.data.display_name&&(t+=e.owner.OBJ.data.display_name),void 0!==e.owner&&void 0!==e.owner.OBJ&&void 0!==e.owner.OBJ.display_name&&(t+=e.owner.OBJ.display_name),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_generic_assignedobj(e){var t="";return void 0!==e.customer&&null!=e.customer&&0!=e.customer&&void 0!==e.customer.owner?void 0!==e.customer.owner&&void 0!==e.customer.owner.OBJ&&void 0!==e.customer.owner.OBJ.data&&void 0!==e.customer.owner.OBJ.data.display_name&&(t+=e.customer.owner.OBJ.data.display_name):void 0!==e.company&&null!=e.company&&void 0!==e.company.owner&&void 0!==e.company.owner&&void 0!==e.company.owner.OBJ&&void 0!==e.company.owner.OBJ.data&&void 0!==e.company.owner.OBJ.data.display_name&&(t+=e.company.owner.OBJ.data.display_name),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_generic_latestlog(e){var t="";return void 0!==e.lastlog&&void 0!==e.lastlog.type&&void 0!==e.lastlog.shortdesc&&(t+=zeroBSCRMJS_logTypeStr(e.lastlog.type)+": "+e.lastlog.shortdesc),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_generic_lastcontacted(e){var t="",i=-1;return void 0!==e.lastcontactlog&&void 0!==e.lastcontactlog.created?i=e.lastcontactlog.created:void 0!==e.lastcontacted&&(i=e.lastcontacted),-1!==i&&(i=moment(i),0==(i=moment().diff(i,"days"))?t=zeroBSCRMJS_listViewLang("today"):0<i&&(t=1==i?zeroBSCRMJS_listViewLang("yesterday"):i+" "+zeroBSCRMJS_listViewLang("daysago"))),""==t&&(t=zeroBSCRMJS_listViewLang("notcontacted")),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_generic_tagged(e){var i="";return void 0!==e.tags&&0<e.tags.length&&jQuery.each(e.tags,function(e,t){void 0!==t.term_id?i+='<a href="'+window.zbsTagSkipLinkPrefix+t.term_id+'" title="View all with this tag" class="ui small basic label teal">'+t.name+"</a>":void 0!==t.id&&(i+='<a href="'+window.zbsTagSkipLinkPrefix+t.id+'" title="View all with this tag" class="ui small basic label teal">'+t.name+"</a>")}),"<td>"+i+"</td>"}function zeroBSCRMJS_listView_generic_hasquote(e){var t=!1;return void 0!==e.quotes&&0!=e.quotes&&"0"!=e.quotes&&(t=!0),void 0!==e.quotes_total_value&&0<e.quotes_total_value&&(t=!0),'<td class="center aligned">'+(t?'<i class="large green checkmark icon"></i>':"")+"</td>"}function zeroBSCRMJS_listView_generic_hasinvoice(e){var t=!1;return void 0!==e.invoices&&0!=e.invoices&&"0"!=e.invoices&&(t=!0),void 0!==e.invoices_total_value&&0<e.invoices_total_value&&(t=!0),'<td class="center aligned">'+(t?'<i class="large green checkmark icon"></i>':"")+"</td>"}function zeroBSCRMJS_listView_generic_hastransaction(e){var t=!1;return void 0!==e.transactions&&0!=e.transactions&&"0"!=e.transactions&&(t=!0),void 0!==e.transactions_total_value&&0<e.transactions_total_value&&(t=!0),'<td class="center aligned">'+(t?'<i class="large green checkmark icon"></i>':"")+"</td>"}function zeroBSCRMJS_listView_generic_quotecount(e){return"<td>"+(void 0!==e.quotes?e.quotes.length:"")+"</td>"}function zeroBSCRMJS_listView_generic_invoicecount(e){return"<td>"+(void 0!==e.invoices?e.invoices.length:"")+"</td>"}function zeroBSCRMJS_listView_generic_transactioncount(e){return"<td>"+(void 0!==e.transactions?e.transactions.length:"")+"</td>"}function zeroBSCRMJS_listView_generic_quotetotal(e){return"<td>"+(void 0!==e.quotestotal?e.quotestotal:"")+"</td>"}function zeroBSCRMJS_listView_generic_invoicetotal(e){return"<td>"+(void 0!==e.invoicestotal?e.invoicestotal:"")+"</td>"}function zeroBSCRMJS_listView_generic_transactiontotal(e){var t="";return void 0!==e.transactionstotal&&(t=e.transactionstotal),void 0!==e.transactions_total&&(t=e.transactions_total),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_generic_editlink(e){return'<td class="center aligned"><a href="'+zeroBSCRMJS_listView_editURL(e.id)+'" class="ui basic button"><i class="icon pencil"></i>'+zeroBSCRMJS_listViewLang("zbs_edit")+"</a></td>"}function zeroBSCRMJS_listView_generic_editdirectlink(e){return'<td class="center aligned"><a href="'+zeroBSCRMJS_listView_editURL(e.id)+'" class="ui basic button"><i class="icon pencil"></i>'+zeroBSCRMJS_listViewLang("zbs_edit")+"</a></td>"}function zeroBSCRMJS_listView_generic_editdirectlink(e){return'<td class="center aligned"><a href="'+zeroBSCRMJS_listView_editURL(e.id)+'" class="ui basic button"><i class="icon eye"></i>'+window.zbs_lang.zbs_view+"</a></td>"}function zeroBSCRMJS_listView_generic_viewlink(e){return'<td class="center aligned"><a href="'+zeroBSCRMJS_listView_viewURL(e.id)+'" class="ui basic button"><i class="icon eye"></i>'+window.zbs_lang.zbs_view+"</a></td>"}function zeroBSCRMJS_listView_generic_phonelink(e){var t="";return void 0!==e.hometel&&""!=e.hometel&&(t+='<a href="'+zeroBSCRMJS_telURLFromNo(e.hometel)+'" class="ui tiny basic button"><i class="icon call"></i> '+e.hometel+" ("+zeroBSCRMJS_listViewLang("telhome")+")</a>"),void 0!==e.worktel&&""!=e.worktel&&(t+='<a href="'+zeroBSCRMJS_telURLFromNo(e.worktel)+'" class="ui tiny basic button"><i class="icon call"></i> '+e.worktel+" ("+zeroBSCRMJS_listViewLang("telwork")+")</a>"),void 0!==e.mobtel&&""!=e.mobtel&&(t+='<a href="'+zeroBSCRMJS_telURLFromNo(e.mobtel)+'" class="ui tiny basic button"><i class="icon call"></i> '+e.mobtel+" ("+zeroBSCRMJS_listViewLang("telmob")+")</a>"),'<td class="center aligned">'+t+"</td>"}function zeroBSCRMJS_listView_customer_secaddr1(e){var t="";return void 0!==e.secaddr_addr1&&(t=e.secaddr_addr1),""==t&&void 0!==e.secaddr1&&(t=e.secaddr1),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_customer_secaddr2(e){var t="";return void 0!==e.secaddr_addr2&&(t=e.secaddr_addr2),""==t&&void 0!==e.secaddr2&&(t=e.secaddr2),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_customer_seccity(e){var t="";return void 0!==e.secaddr_city&&(t=e.secaddr_city),""==t&&void 0!==e.seccity&&(t=e.seccity),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_customer_seccounty(e){var t="";return void 0!==e.secaddr_county&&(t=e.secaddr_county),""==t&&void 0!==e.seccounty&&(t=e.seccounty),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_customer_secpostcode(e){var t="";return void 0!==e.secaddr_postcode&&(t=e.secaddr_postcode),""==t&&void 0!==e.secpostcode&&(t=e.secpostcode),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_customer_seccountry(e){var t="";return void 0!==e.secaddr_country&&(t=e.secaddr_country),""==t&&void 0!==e.seccountry&&(t=e.seccountry),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_customer_added(e){var t="";return""==t&&void 0!==e.created_date&&(t=e.created_date),""==t&&void 0!==e.created&&(t=e.created),""==t&&void 0!==e.added&&(t=e.added),'<td data-zbs-created-uts="'+e.createduts+'">'+t+"</td>"}function zeroBSCRMJS_listView_customer_totalvalue(e){var t="";return void 0!==e.totalvalue&&(t=e.totalvalue),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_customer_name(e){var t="";return void 0!==e.name&&(t=e.name),'<td><a href="'+zeroBSCRMJS_listView_viewURL(e.id)+'">'+t+"</a></td>"}function zeroBSCRMJS_listView_customer_fname(e){return"<td>"+e.fname+"</td>"}function zeroBSCRMJS_listView_customer_lname(e){return"<td>"+e.lname+"</td>"}function zeroBSCRMJS_listView_customer_nameavatar(e){var t=zeroBSCRMJS_listView_viewURL(e.id),i=zeroBSCRMJS_listView_emailURL_contact(e.id),s="";void 0!==e.email&&""!=e.email&&(s='<a href="'+i+'">'+e.email+"</a>");var n="";void 0!==e.avatar&&""!=e.avatar&&(n='<img src="'+e.avatar+'" class="ui mini rounded image">');i="";void 0!==e.name&&""!=e.name&&(i=e.name),""==i&&void 0!==e.email&&""!=e.email&&(i=e.email);e='<td class="name-and-avatar-list"><h4 class="ui image header">';return e+=n,e+='<div class="content"><a href="'+t+'">'+i+'</a><div class="sub header">'+s+"</div>",e+="</div></h4></td>"}function zeroBSCRMJS_listView_customer_assigned(e){var t="",i=-1;return void 0!==e.owner&&void 0!==e.owner.ID&&(i=e.owner.ID),void 0!==e.owner&&void 0!==e.owner.OBJ&&void 0!==e.owner.OBJ.data&&void 0!==e.owner.OBJ.data.display_name&&(t+=e.owner.OBJ.data.display_name),void 0!==e.owner&&void 0!==e.owner.OBJ&&void 0!==e.owner.OBJ.display_name&&(t+=e.owner.OBJ.display_name),"<td"+zeroBSCRMJS_listView_tdAttr("assigned",e,i)+">"+t+"</td>"}function zeroBSCRMJS_listView_customer_latestlog(e){var t="";return void 0!==e.lastlog&&void 0!==e.lastlog.type&&void 0!==e.lastlog.shortdesc&&(t+=zeroBSCRMJS_logTypeStr(e.lastlog.type)+": "+e.lastlog.shortdesc),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_customer_tagged(e){var i="";return void 0!==e.tags&&0<e.tags.length&&jQuery.each(e.tags,function(e,t){void 0!==t.term_id?i+='<a href="'+window.zbsTagSkipLinkPrefix+t.term_id+'" title="View all with this tag" class="ui small basic label teal">'+t.name+"</a>":void 0!==t.id&&(i+='<a href="'+window.zbsTagSkipLinkPrefix+t.id+'" title="View all with this tag" class="ui small basic label teal">'+t.name+"</a>")}),"<td>"+i+"</td>"}function zeroBSCRMJS_listView_customer_editlink(e){return'<td class="center aligned"><a href="'+zeroBSCRMJS_listView_viewURL(e.id)+'" class="ui basic button"><i class="icon eye"></i>'+window.zbs_lang.zbs_view+"</a></td>"}function zeroBSCRMJS_listView_customer_editdirectlink(e){return'<td class="center aligned"><a href="'+zeroBSCRMJS_listView_editURL(e.id)+'" class="ui basic button"><i class="icon eye"></i>'+window.zbs_lang.zbs_edit+"</a></td>"}function zeroBSCRMJS_listView_customer_phonelink(e){var t="";return void 0!==e.hometel&&""!=e.hometel&&(t+='<a href="'+zeroBSCRMJS_telURLFromNo(e.hometel)+'" class="ui tiny basic button"><i class="icon call"></i> '+e.hometel+" ("+zeroBSCRMJS_listViewLang("telhome")+")</a>"),void 0!==e.worktel&&""!=e.worktel&&(t+='<a href="'+zeroBSCRMJS_telURLFromNo(e.worktel)+'" class="ui tiny basic button"><i class="icon call"></i> '+e.worktel+" ("+zeroBSCRMJS_listViewLang("telwork")+")</a>"),void 0!==e.mobtel&&""!=e.mobtel&&(t+='<a href="'+zeroBSCRMJS_telURLFromNo(e.mobtel)+'" class="ui tiny basic button"><i class="icon call"></i> '+e.mobtel+" ("+zeroBSCRMJS_listViewLang("telmob")+")</a>"),'<td class="center aligned">'+t+"</td>"}function zbsIdentify(){return"#####zbshash#####"}function zeroBSCRMJS_listView_segment_bulkActionTitle_delete(){return zeroBSCRMJS_listViewLang("deletesegments")}function zeroBSCRMJS_listView_segment_bulkActionFire_delete(){var t={};swal({title:zeroBSCRMJS_listViewLang("areyousure"),html:"<div>"+zeroBSCRMJS_listViewLang("areyousurethese")+"</div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete!"}).then(function(e){e.value&&zeroBSCRMJS_enactBulkAction("delete",zeroBSCRMJS_listView_bulkActionsGetChecked(),t,function(e){swal(zeroBSCRMJS_listViewLang("deleted"),zeroBSCRMJS_listViewLang("segmentsdeleted"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("notdeleted"),zeroBSCRMJS_listViewLang("notsegmentsdeleted"),"warning")})})}function zeroBSCRMJS_listView_segment_id(e){return"<td>#"+e.id+"</td>"}function zeroBSCRMJS_listView_segment_added(e){var t="";return""==t&&void 0!==e.created_date&&(t=e.created_date),""==t&&void 0!==e.createddate&&(t=e.createddate),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_segment_name(e){return'<td><a href="'+zeroBSCRMJS_listView_editURL(e.id)+'">'+e.name+"</a></td>"}function zeroBSCRMJS_listView_segment_audiencecount(e){var t=window.zbsListViewLangLabels.notCompiled;return void 0!==e.compilecount&&(t='<span class="ui label teal" title="'+window.zbsListViewLangLabels.lastCompiled+" "+e.lastcompileddate+'">'+e.compilecount+"</span>",void 0!==window.zbsSegmentViewStemURL&&void 0!==e.slug&&(t='<div class="ui left labeled button" title="'+window.zbsListViewLangLabels.lastCompiled+" "+e.lastcompileddate+'"><a class="ui basic right pointing label">'+e.compilecount+'</a><a href="'+window.zbsSegmentViewStemURL+e.slug+'" class="ui button"><i class="list icon"></i> '+window.zbsListViewLangLabels.view+"</a></div>")),'<td class="center aligned">'+t+"</td>"}function zeroBSCRMJS_listView_segment_action(e){return'<td class="center aligned">'+('<a href="'+zeroBSCRMJS_listView_editURL(e.id)+'" class="ui basic button"><i class="icon edit"></i> '+zeroBSCRMJS_listViewLang("edit","Edit")+"</a>")+"</td>"}function zeroBSCRMJS_listView_quotetemplate_id(e){var t="#"+e.id;return void 0!==e.zbsid&&(t='<a href="'+zeroBSCRMJS_listView_editURL(e.id)+'">#'+e.zbsid+"</a>"),"<td"+zeroBSCRMJS_listView_tdAttr("id",e,e.id)+">"+t+"</td>"}function zeroBSCRMJS_listView_quotetemplate_title(e){var t="";return void 0!==e.default&&0<parseInt(e.default)&&(t="<br />(<i>"+zeroBSCRMJS_listViewLang("defaulttemplate","Default Template")+"</i>)"),"<td"+zeroBSCRMJS_listView_tdAttr("title",e,e.title)+'><a href="'+zeroBSCRMJS_listView_editURL(e.id)+'">'+e.title+"</a>"+t+"</td>"}function zeroBSCRMJS_listView_quotetemplate_action(e){return'<td class="center aligned">'+('<a href="'+zeroBSCRMJS_listView_editURL(e.id)+'" class="ui basic button"><i class="icon edit"></i> '+zeroBSCRMJS_listViewLang("edit","Edit")+"</a>")+"</td>"}function zeroBSCRMJS_listView_company_coname(e){return zeroBSCRMJS_listView_company_name(e)}function zeroBSCRMJS_listView_company_name(e){var t="";return void 0!==e.name&&(t=e.name),'<td><a href="'+zeroBSCRMJS_listView_viewURL(e.id)+'">'+t+"</a></td>"}function zeroBSCRMJS_listView_company_nameavatar(e){var t=zeroBSCRMJS_listView_editURL(e.id),i=zeroBSCRMJS_listView_emailURL_contact(e.id),s="";void 0!==e.email&&""!=e.email&&(s='<a href="'+i+'">'+e.email+"</a>");var n="";void 0!==e.avatar&&""!=e.avatar&&(n='<img src="'+e.avatar+'" class="ui mini rounded image">');i="";void 0!==e.coname&&""!=e.coname&&(i=e.coname),""==i&&void 0!==e.name&&(i=e.name),""==i&&void 0!==e.email&&""!=e.email&&(i=e.email);e='<td class="name-and-avatar-list"><h4 class="ui image header">';return e+=n,e+='<div class="content"><a href="'+t+'">'+i+'</a><div class="sub header">'+s+"</div>",e+="</div></h4></td>"}function zeroBSCRMJS_listView_company_secaddr1(e){var t="";return void 0!==e.secaddr_addr1&&(t=e.secaddr_addr1),""==t&&void 0!==e.secaddr1&&(t=e.secaddr1),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_company_secaddr2(e){var t="";return void 0!==e.secaddr_addr2&&(t=e.secaddr_addr2),""==t&&void 0!==e.secaddr2&&(t=e.secaddr2),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_company_seccity(e){var t="";return void 0!==e.secaddr_city&&(t=e.secaddr_city),""==t&&void 0!==e.seccity&&(t=e.seccity),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_company_seccounty(e){var t="";return void 0!==e.secaddr_county&&(t=e.secaddr_county),""==t&&void 0!==e.seccounty&&(t=e.seccounty),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_company_secpostcode(e){var t="";return void 0!==e.secaddr_postcode&&(t=e.secaddr_postcode),""==t&&void 0!==e.secpostcode&&(t=e.secpostcode),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_company_seccountry(e){var t="";return void 0!==e.secaddr_country&&(t=e.secaddr_country),""==t&&void 0!==e.seccountry&&(t=e.seccountry),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_company_transactioncount(e){var t="";return void 0!==e.transactions&&(t=e.transactions.length),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_company_transactiontotal(e){var t="";return void 0!==e.transactionstotal&&(t=e.transactionstotal),void 0!==e.transactions_total&&(t=e.transactions_total),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_company_phonelink(e){var t="";return void 0!==e.maintel&&""!=e.maintel&&(t+='<a href="'+zeroBSCRMJS_telURLFromNo(e.maintel)+'" class="ui tiny basic button"><i class="icon call"></i> '+e.maintel+"</a>"),void 0!==e.sectel&&""!=e.sectel&&(t+='<a href="'+zeroBSCRMJS_telURLFromNo(e.sectel)+'" class="ui tiny basic button"><i class="icon call"></i> '+e.sectel+"</a>"),'<td class="center aligned">'+t+"</td>"}function zeroBSCRMJS_listView_company_bulkActionTitle_delete(){return zeroBSCRMJS_listViewLang("deletecompanys")}function zeroBSCRMJS_listView_company_bulkActionTitle_addtag(){return zeroBSCRMJS_listViewLang("addtags")}function zeroBSCRMJS_listView_company_bulkActionTitle_removetag(){return zeroBSCRMJS_listViewLang("removetags")}function zeroBSCRMJS_listView_company_bulkActionTitle_export(){return zeroBSCRMJS_listViewLang("export")}function zeroBSCRMJS_listView_company_bulkActionFire_delete(){var t={leaveorphans:!0};swal({title:zeroBSCRMJS_listViewLang("areyousure"),html:"<div>"+zeroBSCRMJS_listViewLang("areyousurethese")+"<br /><label>"+zeroBSCRMJS_listViewLang("andthese")+'</label></div><select id="zbsbulkactiondeleteleaveorphans"><option value="1" selected="selected">'+zeroBSCRMJS_listViewLang("noleave")+'</option><option value="0">'+zeroBSCRMJS_listViewLang("yesthose")+"</option></select></div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("yesdelete")}).then(function(e){e.value&&(t.leaveorphans=jQuery("#zbsbulkactiondeleteleaveorphans").val(),zeroBSCRMJS_enactBulkAction("delete",zeroBSCRMJS_listView_bulkActionsGetChecked(),t,function(e){swal(zeroBSCRMJS_listViewLang("deleted"),zeroBSCRMJS_listViewLang("companysdeleted"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("notdeleted"),zeroBSCRMJS_listViewLang("notcompanysdeleted"),"warning")}))})}function zeroBSCRMJS_listView_company_bulkActionFire_addtag(){var i={tags:[]},s='<div id="zbs-select-tags" class="ui segment">';void 0!==window.zbsTagsForBulkActions&&0<window.zbsTagsForBulkActions.length?jQuery.each(window.zbsTagsForBulkActions,function(e,t){s+='<div class="zbs-select-tag ui label"><div class="ui checkbox"><input type="checkbox" data-tagid="'+t.id+'" id="zbs-tag-'+t.id+'" /><label for="zbs-tag-'+t.id+'">'+t.name+"</label></div></div>"}):s+='<div class="ui message"><p>'+zeroBSCRMJS_listViewLang("notags")+"</p></div>",s+="</div>",swal({title:zeroBSCRMJS_listViewLang("whichtags"),html:"<div>"+zeroBSCRMJS_listViewLang("whichtagsadd")+"<br />"+s+"</div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("addthesetags"),onOpen:function(){jQuery(".zbs-select-tag input:checkbox").off("click").click(function(){jQuery(".zbs-select-tag input:checkbox").each(function(e,t){jQuery(t).is(":checked")?jQuery(t).closest(".ui.label").addClass("blue"):jQuery(t).closest(".ui.label").removeClass("blue")})})}}).then(function(e){e.value&&(i.tags=[],jQuery(".zbs-select-tag input:checkbox").each(function(e,t){jQuery(t).is(":checked")&&i.tags.push(jQuery(t).attr("data-tagid"))}),0<i.tags.length?zeroBSCRMJS_enactBulkAction("addtag",zeroBSCRMJS_listView_bulkActionsGetChecked(),i,function(e){swal(zeroBSCRMJS_listViewLang("tagsadded"),zeroBSCRMJS_listViewLang("tagsaddeddesc"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("tagsnotadded"),zeroBSCRMJS_listViewLang("tagsnotaddeddesc"),"warning")}):swal(zeroBSCRMJS_listViewLang("tagsnotselected"),zeroBSCRMJS_listViewLang("tagsnotselecteddesc"),"warning"))})}function zeroBSCRMJS_listView_company_bulkActionFire_removetag(){var i={tags:[]},s='<div id="zbs-select-tags" class="ui segment">';void 0!==window.zbsTagsForBulkActions&&0<window.zbsTagsForBulkActions.length?jQuery.each(window.zbsTagsForBulkActions,function(e,t){s+='<div class="zbs-select-tag ui label"><div class="ui checkbox"><input type="checkbox" data-tagid="'+t.id+'" id="zbs-tag-'+t.id+'" /><label for="zbs-tag-'+t.id+'">'+t.name+"</label></div></div>"}):s+='<div class="ui message"><p>'+zeroBSCRMJS_listViewLang("notags")+"</p></div>",s+="</div>",swal({title:zeroBSCRMJS_listViewLang("whichtags"),html:"<div>"+zeroBSCRMJS_listViewLang("whichtagsremove")+"<br />"+s+"</div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("removethesetags"),onOpen:function(){jQuery(".zbs-select-tag input:checkbox").off("click").click(function(){jQuery(".zbs-select-tag input:checkbox").each(function(e,t){jQuery(t).is(":checked")?jQuery(t).closest(".ui.label").addClass("blue"):jQuery(t).closest(".ui.label").removeClass("blue")})})}}).then(function(e){e.value&&(i.tags=[],jQuery(".zbs-select-tag input:checkbox").each(function(e,t){jQuery(t).is(":checked")&&i.tags.push(jQuery(t).attr("data-tagid"))}),0<i.tags.length?zeroBSCRMJS_enactBulkAction("removetag",zeroBSCRMJS_listView_bulkActionsGetChecked(),i,function(e){swal(zeroBSCRMJS_listViewLang("tagsremoved"),zeroBSCRMJS_listViewLang("tagsremoveddesc"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("tagsnotremoved"),zeroBSCRMJS_listViewLang("tagsnotremoveddesc"),"warning")}):swal(zeroBSCRMJS_listViewLang("tagsnotselected"),zeroBSCRMJS_listViewLang("tagsnotselecteddesc"),"warning"))})}function zeroBSCRMJS_listView_quote_title(e){var t="";return void 0!==e.name&&(t=e.name),""==t&&void 0!==e.title&&(t=e.title),""==t&&void 0!==e.id_override&&""!==e.id_override&&(t="#"+e.id_override),'<td><strong><a href="'+zeroBSCRMJS_listView_viewURL(e.id)+'">'+t+"</a></strong></td>"}function zeroBSCRMJS_listView_quote_value(e){var t="";return""==t&&void 0!==e.value&&(t=e.value),""==t&&void 0!==e.val&&(t=e.val),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_quote_status(e){var t="";return void 0!==e.status&&(t=e.status),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_quote_date(e){var t="";return void 0!==e.meta&&void 0!==e.meta.date&&(t=e.meta.date),""==t&&void 0!==e.date_date&&(t=e.date_date),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_quote_bulkActionTitle_markaccepted(){return zeroBSCRMJS_listViewLang("markaccepted")}function zeroBSCRMJS_listView_quote_bulkActionTitle_markunaccepted(){return zeroBSCRMJS_listViewLang("markunaccepted")}function zeroBSCRMJS_listView_quote_bulkActionTitle_delete(){return zeroBSCRMJS_listViewLang("delete")}function zeroBSCRMJS_listView_quote_bulkActionTitle_export(){return zeroBSCRMJS_listViewLang("export")}function zeroBSCRMJS_listView_quote_bulkActionFire_markaccepted(){var t={};swal({title:zeroBSCRMJS_listViewLang("areyousure"),html:"<div>"+zeroBSCRMJS_listViewLang("acceptareyousurequotes")+"</div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("acceptyesdoit")}).then(function(e){e.value&&(t.leaveorphans=jQuery("#zbsbulkactiondeleteleaveorphans").val(),zeroBSCRMJS_enactBulkAction("markaccepted",zeroBSCRMJS_listView_bulkActionsGetChecked(),t,function(e){swal(zeroBSCRMJS_listViewLang("acceptdeleted"),zeroBSCRMJS_listViewLang("acceptcompanysdeleted"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("acceptnotdeleted"),zeroBSCRMJS_listViewLang("acceptnotcompanysdeleted"),"warning")}))})}function zeroBSCRMJS_listView_quote_bulkActionFire_markunaccepted(){var t={};swal({title:zeroBSCRMJS_listViewLang("areyousure"),html:"<div>"+zeroBSCRMJS_listViewLang("unacceptareyousurethese")+"</div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("yesproceed")}).then(function(e){e.value&&(t.leaveorphans=jQuery("#zbsbulkactiondeleteleaveorphans").val(),zeroBSCRMJS_enactBulkAction("markunaccepted",zeroBSCRMJS_listView_bulkActionsGetChecked(),t,function(e){swal(zeroBSCRMJS_listViewLang("unacceptdeleted"),zeroBSCRMJS_listViewLang("unacceptcompanysdeleted"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("unacceptnotdeleted"),zeroBSCRMJS_listViewLang("unacceptnotcompanysdeleted"),"warning")}))})}function zeroBSCRMJS_listView_quote_bulkActionFire_delete(){var t={};swal({title:zeroBSCRMJS_listViewLang("areyousure"),html:"<div>"+zeroBSCRMJS_listViewLang("areyousurethese")+"</div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("yesdelete")}).then(function(e){e.value&&zeroBSCRMJS_enactBulkAction("delete",zeroBSCRMJS_listView_bulkActionsGetChecked(),t,function(e){swal(zeroBSCRMJS_listViewLang("deleted"),zeroBSCRMJS_listViewLang("quotesdeleted"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("notdeleted"),zeroBSCRMJS_listViewLang("notquotesdeleted"),"warning")})})}function zeroBSCRMJS_listView_quotetemplate_bulkActionTitle_delete(){return zeroBSCRMJS_listViewLang("deletetemplate")}function zeroBSCRMJS_listView_quotetemplate_bulkActionFire_delete(){var t={};swal({title:zeroBSCRMJS_listViewLang("areyousure"),html:"<div>"+zeroBSCRMJS_listViewLang("areyousurethese")+"</div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("yesdelete")}).then(function(e){e.value&&zeroBSCRMJS_enactBulkAction("delete",zeroBSCRMJS_listView_bulkActionsGetChecked(),t,function(e){swal(zeroBSCRMJS_listViewLang("deleted"),zeroBSCRMJS_listViewLang("quotetemplatesdeleted"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("notdeleted"),zeroBSCRMJS_listViewLang("notquotetemplatesdeleted"),"warning")})})}function zeroBSCRMJS_listView_invoice_bulkActionTitle_delete(){return zeroBSCRMJS_listViewLang("delete")}function zeroBSCRMJS_listView_invoice_bulkActionTitle_export(){return zeroBSCRMJS_listViewLang("export")}function zeroBSCRMJS_listView_invoice_no(e){var t="";return void 0!==e.zbsid&&(t=e.zbsid),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_invoice_date(e){var t="";return void 0!==e.meta&&void 0!==e.meta.date&&(t=e.meta.date),""==t&&void 0!==e.date_date&&(t=e.date_date),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_invoice_due(e){var t="";return void 0!==e.duedate&&(t=e.duedate),""==t&&void 0!==e.due_date_date&&(t=e.due_date_date),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_invoice_ref(e){var t="";return void 0!==e.title&&(t=e.title),""==t&&void 0!==e.id_override&&(t=e.id_override),""==t&&void 0!==e.id&&(t="#"+e.id),'<td><strong><a href="'+zeroBSCRMJS_listView_viewURL(e.id)+'">'+t+"</a></strong></td>"}function zeroBSCRMJS_listView_invoice_val(e){var t="";return""==t&&void 0!==e.total&&(t=e.total),""==t&&void 0!==e.value&&(t=e.value),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_invoice_value(e){var t="";return""==t&&void 0!==e.total&&(t=e.total),""==t&&void 0!==e.value&&(t=e.value),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_invoice_status(e){var t="";void 0!==e.status&&(t=e.status);var i="";switch(t){case zeroBSCRMJS_listViewLang("statusdraft","Draft"):i="grey";break;case zeroBSCRMJS_listViewLang("statusunpaid","Unpaid"):i="orange";break;case zeroBSCRMJS_listViewLang("statuspaid","Paid"):i="green";break;case zeroBSCRMJS_listViewLang("statusoverdue","Overdue"):i="red"}return"<td>"+(t='<span class="ui label '+i+'">'+t+"</span>")+"</td>"}function zeroBSCRMJS_listView_invoice_bulkActionTitle_changestatus(){return zeroBSCRMJS_listViewLang("changestatus")}function zeroBSCRMJS_listView_invoice_bulkActionTitle_delete(){return zeroBSCRMJS_listViewLang("delete")}function zeroBSCRMJS_listView_invoice_bulkActionFire_changestatus(){var t={};swal({title:zeroBSCRMJS_listViewLang("areyousure"),html:"<div>"+zeroBSCRMJS_listViewLang("statusareyousurethese")+'</div><select id="zbsbulkactionnewstatus"><option value="Draft" selected="selected">'+zeroBSCRMJS_listViewLang("statusdraft")+'</option><option value="Unpaid">'+zeroBSCRMJS_listViewLang("statusunpaid")+'</option><option value="Paid">'+zeroBSCRMJS_listViewLang("statuspaid")+'</option><option value="Overdue">'+zeroBSCRMJS_listViewLang("statusoverdue")+"</option></select></div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("yesupdate")}).then(function(e){e.value&&(t.newstatus=jQuery("#zbsbulkactionnewstatus").val(),zeroBSCRMJS_enactBulkAction("changestatus",zeroBSCRMJS_listView_bulkActionsGetChecked(),t,function(e){swal(zeroBSCRMJS_listViewLang("statusupdated"),zeroBSCRMJS_listViewLang("statuscompanysupdated"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("statusnotupdated"),zeroBSCRMJS_listViewLang("statusnotcompanysupdated"),"warning")}))})}function zeroBSCRMJS_listView_invoice_bulkActionFire_delete(){var t={};swal({title:zeroBSCRMJS_listViewLang("areyousure"),html:"<div>"+zeroBSCRMJS_listViewLang("areyousurethese")+"</div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("yesdelete")}).then(function(e){e.value&&zeroBSCRMJS_enactBulkAction("delete",zeroBSCRMJS_listView_bulkActionsGetChecked(),t,function(e){swal(zeroBSCRMJS_listViewLang("deleted"),zeroBSCRMJS_listViewLang("invoicesdeleted"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("notdeleted"),zeroBSCRMJS_listViewLang("notinvoicesdeleted"),"warning")})})}function zeroBSCRMJS_listView_transaction_id(e){var t="";return""==t&&void 0!==e.id_override&&(t=e.id_override),""==t&&void 0!==e.id&&(t=e.id),void 0!==e.id&&(t='<a href="'+zeroBSCRMJS_listView_viewURL(e.id)+'">#'+t+"</a>"),"<td><strong>"+t+"</strong></td>"}function zeroBSCRMJS_listView_transaction_item(e){return zeroBSCRMJS_listView_transaction_title(e)}function zeroBSCRMJS_listView_transaction_title(e){var t="";return""==t&&void 0!==e.title&&(t=e.title),""==t&&void 0!==e.item&&(t=e.item),"<td><strong>"+t+"</strong></td>"}function zeroBSCRMJS_listView_transaction_orderid(e){var t="";return""==t&&void 0!==e.ref&&(t=e.ref),""==t&&void 0!==e.orderid&&(t=e.orderid),"<td><strong>"+t+"</strong></td>"}function zeroBSCRMJS_listView_transaction_total(e){return"<td>"+e.total+"</td>"}function zeroBSCRMJS_listView_transaction_status(e){var t="";void 0!==e.status&&(t=e.status);var i="";switch(t){case zeroBSCRMJS_listViewLang("trans_status_cancelled","Cancelled"):i="pink";break;case zeroBSCRMJS_listViewLang("trans_status_hold","Hold"):i="orange";break;case zeroBSCRMJS_listViewLang("trans_status_pending","Pending"):case zeroBSCRMJS_listViewLang("trans_status_processing","Processing"):i="teal";break;case zeroBSCRMJS_listViewLang("trans_status_refunded","Refunded"):i="orange";break;case zeroBSCRMJS_listViewLang("trans_status_failed","Failed"):i="red";break;case zeroBSCRMJS_listViewLang("trans_status_completed","Completed"):case zeroBSCRMJS_listViewLang("trans_status_succeeded","Succeeded"):i="positive"}return"<td>"+(t='<span class="ui label '+i+'">'+t+"</span>")+"</td>"}function zeroBSCRMJS_listView_transaction_date(e){var t="";return""==t&&void 0!==e.date_date&&!1!==e.date_date&&(t=e.date_date),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_transaction_date_paid(e){var t="";return""==t&&void 0!==e.date_paid_date&&!1!==e.date_paid_date&&(t=e.date_paid_date),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_transaction_date_completed(e){var t="";return""==t&&void 0!==e.date_completed_date&&!1!==e.date_completed_date&&(t=e.date_completed_date),"<td>"+t+"</td>"}function zeroBSCRMJS_listView_transaction_bulkActionTitle_delete(){return zeroBSCRMJS_listViewLang("delete")}function zeroBSCRMJS_listView_transaction_bulkActionTitle_addtag(){return zeroBSCRMJS_listViewLang("addtags")}function zeroBSCRMJS_listView_transaction_bulkActionTitle_removetag(){return zeroBSCRMJS_listViewLang("removetags")}function zeroBSCRMJS_listView_transaction_bulkActionTitle_export(){return zeroBSCRMJS_listViewLang("export")}function zeroBSCRMJS_listView_transaction_bulkActionFire_delete(){var t={leaveorphans:!0};swal({title:zeroBSCRMJS_listViewLang("areyousure"),html:"<div>"+zeroBSCRMJS_listViewLang("areyousurethese")+"</div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("yesdelete")}).then(function(e){e.value&&zeroBSCRMJS_enactBulkAction("delete",zeroBSCRMJS_listView_bulkActionsGetChecked(),t,function(e){swal(zeroBSCRMJS_listViewLang("deleted"),zeroBSCRMJS_listViewLang("transactionsdeleted"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("notdeleted"),zeroBSCRMJS_listViewLang("nottransactionsdeleted"),"warning")})})}function zeroBSCRMJS_listView_transaction_bulkActionFire_addtag(){var i={tags:[]},s='<div id="zbs-select-tags" class="ui segment">';void 0!==window.zbsTagsForBulkActions&&0<window.zbsTagsForBulkActions.length?jQuery.each(window.zbsTagsForBulkActions,function(e,t){s+='<div class="zbs-select-tag ui label"><div class="ui checkbox"><input type="checkbox" data-tagid="'+t.id+'" id="zbs-tag-'+t.id+'" /><label for="zbs-tag-'+t.id+'">'+t.name+"</label></div></div>"}):s+='<div class="ui message"><p>'+zeroBSCRMJS_listViewLang("notags")+"</p></div>",s+="</div>",swal({title:zeroBSCRMJS_listViewLang("whichtags"),html:"<div>"+zeroBSCRMJS_listViewLang("whichtagsadd")+"<br />"+s+"</div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("addthesetags"),onOpen:function(){jQuery(".zbs-select-tag input:checkbox").off("click").click(function(){jQuery(".zbs-select-tag input:checkbox").each(function(e,t){jQuery(t).is(":checked")?jQuery(t).closest(".ui.label").addClass("blue"):jQuery(t).closest(".ui.label").removeClass("blue")})})}}).then(function(e){e.value&&(i.tags=[],jQuery(".zbs-select-tag input:checkbox").each(function(e,t){jQuery(t).is(":checked")&&i.tags.push(jQuery(t).attr("data-tagid"))}),0<i.tags.length?zeroBSCRMJS_enactBulkAction("addtag",zeroBSCRMJS_listView_bulkActionsGetChecked(),i,function(e){swal(zeroBSCRMJS_listViewLang("tagsadded"),zeroBSCRMJS_listViewLang("tagsaddeddesc"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("tagsnotadded"),zeroBSCRMJS_listViewLang("tagsnotaddeddesc"),"warning")}):swal(zeroBSCRMJS_listViewLang("tagsnotselected"),zeroBSCRMJS_listViewLang("tagsnotselecteddesc"),"warning"))})}function zeroBSCRMJS_listView_transaction_bulkActionFire_removetag(){var i={tags:[]},s='<div id="zbs-select-tags" class="ui segment">';void 0!==window.zbsTagsForBulkActions&&0<window.zbsTagsForBulkActions.length?jQuery.each(window.zbsTagsForBulkActions,function(e,t){s+='<div class="zbs-select-tag ui label"><div class="ui checkbox"><input type="checkbox" data-tagid="'+t.id+'" id="zbs-tag-'+t.id+'" /><label for="zbs-tag-'+t.id+'">'+t.name+"</label></div></div>"}):s+='<div class="ui message"><p>'+zeroBSCRMJS_listViewLang("notags")+"</p></div>",s+="</div>",swal({title:zeroBSCRMJS_listViewLang("whichtags"),html:"<div>"+zeroBSCRMJS_listViewLang("whichtagsremove")+"<br />"+s+"</div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("removethesetags"),onOpen:function(){jQuery(".zbs-select-tag input:checkbox").off("click").click(function(){jQuery(".zbs-select-tag input:checkbox").each(function(e,t){jQuery(t).is(":checked")?jQuery(t).closest(".ui.label").addClass("blue"):jQuery(t).closest(".ui.label").removeClass("blue")})})}}).then(function(e){e.value&&(i.tags=[],jQuery(".zbs-select-tag input:checkbox").each(function(e,t){jQuery(t).is(":checked")&&i.tags.push(jQuery(t).attr("data-tagid"))}),0<i.tags.length?zeroBSCRMJS_enactBulkAction("removetag",zeroBSCRMJS_listView_bulkActionsGetChecked(),i,function(e){swal(zeroBSCRMJS_listViewLang("tagsremoved"),zeroBSCRMJS_listViewLang("tagsremoveddesc"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("tagsnotremoved"),zeroBSCRMJS_listViewLang("tagsnotremoveddesc"),"warning")}):swal(zeroBSCRMJS_listViewLang("tagsnotselected"),zeroBSCRMJS_listViewLang("tagsnotselecteddesc"),"warning"))})}function zeroBSCRMJS_listView_form_id(e){return'<td><a href="'+zeroBSCRMJS_listView_viewURL(e.id)+'">#'+e.id+"</a></td>"}function zeroBSCRMJS_listView_form_title(e){return'<td><strong><a href="'+zeroBSCRMJS_listView_viewURL(e.id)+'">'+e.title+"</a></strong></td>"}function zeroBSCRMJS_listView_form_style(e){if(void 0!==e.style)switch(e.style){case"naked":return'<td class="center aligned"><span class="ui label grey">'+zeroBSCRMJS_listViewLang("naked")+"</span></td>";case"cgrab":return'<td class="center aligned"><span class="ui label orange">'+zeroBSCRMJS_listViewLang("cgrab")+"</span></td>";case"simple":return'<td class="center aligned"><span class="ui label teal">'+zeroBSCRMJS_listViewLang("simple")+"</span></td>"}return'<td class="center aligned"></td>'}function zeroBSCRMJS_listView_form_bulkActionTitle_delete(){return zeroBSCRMJS_listViewLang("delete")}function zeroBSCRMJS_listView_form_bulkActionFire_delete(){var t={};swal({title:zeroBSCRMJS_listViewLang("areyousure"),html:"<div>"+zeroBSCRMJS_listViewLang("areyousurethese")+"</div>",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_listViewLang("yesdelete")}).then(function(e){e.value&&zeroBSCRMJS_enactBulkAction("delete",zeroBSCRMJS_listView_bulkActionsGetChecked(),t,function(e){swal(zeroBSCRMJS_listViewLang("deleted"),zeroBSCRMJS_listViewLang("formsdeleted"),"success")},function(e){swal(zeroBSCRMJS_listViewLang("notdeleted"),zeroBSCRMJS_listViewLang("notformsdeleted"),"warning")})})}function zeroBSCRMJS_logTypeStr(e){return void 0!==window.zbsLogTypes.zerobs_customer[e]?window.zbsLogTypes.zerobs_customer[e].label:void 0!==window.zbsLogTypes.zerobs_company[e]?window.zbsLogTypes.zerobs_company[e].label:e}function zeroBSCRMJS_bindInlineEditing(){jQuery("#zbs-list-wrap td.zbs-inline-edit").off("click").click(function(){var e,t,i,s,n;jQuery(this).hasClass("zbs-editing")||(e=jQuery(this).attr("data-col"),t=jQuery(this).attr("data-val"),void 0!==e&&""!=e&&(i="",s="zeroBSCRMJS_listView_"+window.zbsListViewSettings.objdbname+"_edit_"+e,"function"==typeof window[s]?i=window[s](t):(s="zeroBSCRMJS_listView_generic_edit_"+e,"function"==typeof window[s]&&(i=window[s](t))),""!=i&&(n=this,jQuery(this).html(i),jQuery(this).removeClass("zbs-inline-edit").addClass("zbs-inline-editing"),jQuery(this).off("click"),zeroBSCRMJS_listView_bindInlineEditSave(),setTimeout(function(){jQuery("select",n).focus()},100))))})}function zeroBSCRMJS_listView_tdAttr(e,t,i){var s="",n="";return void 0!==window.zbsListViewSettings.editinline&&window.zbsListViewSettings.editinline&&void 0!==window.zbsListViewParams&&void 0!==window.zbsListViewParams.editinline&&void 0!==window.zbsListViewParams.editinline[e]&&1==window.zbsListViewParams.editinline[e]&&(s+="zbs-inline-edit",n+=' data-col="'+e+'"',n+=' data-val="'+i+'"'),""!=s&&(s=' class="'+s+'"'),s+n}function zeroBSCRMJS_listView_bindInlineEditSave(){jQuery(".zbs-listview-inline-edit-field").off("blur").blur(function(){var t=this,e=parseInt(jQuery(this).closest("tr").attr("data-id")),i=jQuery(this).closest(".zbs-inline-editing").attr("data-col"),s=jQuery(this).val(),n=jQuery(":selected",this).text(),o=jQuery(this).closest(".zbs-inline-editing").attr("data-val");s!=o?0<e&&""!=i&&zeroBSCRMJS_listView_saveInlineEdit(e,i,s,function(){var e=n;jQuery(t).closest(".zbs-inline-editing").html(e).removeClass("zbs-inline-editing").addClass("zbs-inline-edit"),zeroBSCRMJS_bindInlineEditing()},function(){swal(zeroBSCRMJS_listViewLang("couldntupdate"),zeroBSCRMJS_listViewLang("couldntupdatedeets"),"warning")}):(s=n,jQuery(t).closest(".zbs-inline-editing").html(s).removeClass("zbs-inline-editing").addClass("zbs-inline-edit"),zeroBSCRMJS_bindInlineEditing())})}var zbListViewInlineEditorAJAXBlocker=!1;function zeroBSCRMJS_listView_saveInlineEdit(e,t,i,s,n){window.zbListViewInlineEditorAJAXBlocker||(window.zbListViewInlineEditorAJAXBlocker=!0,i={action:"zbs_list_save_inline_edit",sec:window.zbscrmjs_secToken,listtype:window.zbsListViewParams.listtype,id:e,field:t,v:i},jQuery.ajax({type:"POST",url:ajaxurl,data:i,dataType:"json",timeout:2e4,success:function(e){"function"==typeof s&&s(e),window.zbListViewInlineEditorAJAXBlocker=!1},error:function(e){"function"==typeof n&&n(e),window.zbListViewInlineEditorAJAXBlocker=!1}}))}function zeroBSCRMJS_listView_customer_edit_status(i){var s="";return 0<window.zbsListViewInlineEdit.customer.statuses.length&&(s='<select class="zbs-listview-inline-edit-field">',jQuery.each(window.zbsListViewInlineEdit.customer.statuses,function(e,t){s+='<option value="'+t+'"',t==i&&(s+=' selected="selected"'),s+=">"+t+"</option>"}),s+="</select>"),s}function zeroBSCRMJS_listView_generic_edit_assigned(i){var s="";return 0<window.zbsListViewInlineEdit.owners.length&&(s='<select class="zbs-listview-inline-edit-field">',jQuery.each(window.zbsListViewInlineEdit.owners,function(e,t){s+='<option value="'+t.id+'"',t.id==i&&(s+=' selected="selected"'),s+=">"+t.name+"</option>"}),s+="</select>"),s}